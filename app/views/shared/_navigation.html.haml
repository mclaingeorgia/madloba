%div{:class => "#{is_in_admin_panel ? 'navbar' : 'navbar-inverse'} navbar-fixed-top navbar-default nav-margin-bottom", :role => "navigation"}
  .navbar-header
    %button.navbar-toggle{"data-target" => ".navbar-responsive-collapse", "data-toggle" => "collapse", :type => "button"}
      %span.icon-bar
      %span.icon-bar
      %span.icon-bar
    - if is_in_setup_mode
      = link_to "#{image_tag 'madloba_logo_50.png', class: 'madloba-img'} #{t('setup.madloba_setup')}".html_safe, setup_path, :class => 'navbar-brand'
    - elsif is_in_admin_panel
      = link_to "#{image_tag 'madloba_logo_green_40.png', class: 'madloba-img'} #{site_name}".html_safe, root_path, :class => 'navbar-brand'
    - else
      = link_to "#{image_tag 'madloba_logo_50.png', class: 'madloba-img'} #{site_name}".html_safe, root_path, :class => 'navbar-brand'
    / Up arrow: when clicked, screen scrolls automatically back up
    %span.navbar-arrow-up
      %a#navbar-up-link{:href => "#", :style => "display: none;"}
        %i.fa.fa-chevron-up
  - if !is_in_setup_mode
    #navbarCollapse.navbar-collapse.collapse.navbar-responsive-collapse
      %ul.nav.navbar-nav
        / "About" link
        - if current_page?(root_url) || current_page?('/search')
          %li= link_to t('home.about'), '#', id: 'about-nav-link'
        - else
          %li= link_to t('home.about'), about_path, id: 'about-nav-link'
        / Language to choose - Georgian or English
        %li.dropdown
          - if I18n.locale == :en
            %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
              = image_tag('en.png', size: '24x18')
              %b.caret
            %ul.dropdown-menu
              %li
                = link_to image_tag('en.png', size: '24x18')+' '+t('home.en_language').html_safe + '&nbsp;<i class="glyphicon glyphicon-ok" style="font-size: 9px;"></i>'.html_safe, change_locale_path(:en)
              %li
                = link_to image_tag('ka.png', size: '24x18')+' '+t('home.ka_language').html_safe, change_locale_path(:ka)
          - elsif I18n.locale == :ka
            %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
              = image_tag('ka.png', size: '24x18').html_safe
              %b.caret
            %ul.dropdown-menu
              %li
                = link_to image_tag('en.png', size: '24x18')+' '+t('home.en_language').html_safe, change_locale_path(:en)
              %li
                = link_to image_tag('ka.png', size: '24x18')+' '+t('home.ka_language').html_safe + '&nbsp;<i class="glyphicon glyphicon-ok" style="font-size: 9px;"></i>'.html_safe, change_locale_path(:ka)
        / Sign in/Register/User drop down menu - start
        - if user_signed_in?
          %li.dropdown
            %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
              %i.glyphicon.glyphicon-user
              = current_user.first_name.nil? ? current_user.email : current_user.first_name
              %b.caret
            %ul.dropdown-menu
              - if is_in_admin_panel
                %li= link_to t('home.page'), root_path
              - elsif current_user.user?
                %li= link_to t('home.user_panel'), user_index_path
              - elsif current_user.admin? || current_user.super_admin?
                %li= link_to t('home.admin_panel').capitalize, user_index_path
              %li= link_to t('home.log_out'), destroy_user_session_path, method: :delete
        - else
          %li
            %a#popover{:href => "#"}= t('home.sign_register')
            #popover-content.hide.popover-larger
              = form_for(resource, as: resource_name, url: session_path(resource_name), :html => {:class => 'form-horizontal'}) do |f|
                = t('home.e-mail')
                \:
                %br/
                = f.email_field :email, {size: 30}
                %br/
                = t('home.password')
                \:
                %br/
                = f.password_field :password, {size: 30}
                %br/
                = f.submit t('home.sign_in').capitalize, class: 'btn btn-primary btn-sm', style: 'margin-top: 10px'
                %br/
                - if is_demo
                  %br/
                  %span{:style => "font-size: 12px;"}
                    %i= t('home.demo_instructions_html', here: link_to(t('ad.here'), 'https://github.com/etiennebaque/madloba/wiki/Madloba-demo-instructions', target: '_blank') )
          %li= link_to t('home.register_link'), new_registration_path(resource_name)
      / Sign in/Register/User drop down menu - end
      / Search form - start
      %form#searchFormId.navbar-form.navbar-left{:action => "/search", :method => "get", :role => "search"}
        .form-group
          = text_field_tag :item, params['item'], class:'typeahead form-control', placeholder: t('home.search_items'), autocomplete: 'off', size: 40
        .form-group
          = text_field_tag :location,'', class:'form-control', placeholder: t('home.location_example')
        .form-group
          = button_tag t('home.search'), :id => 'btn-form-search', :type => 'button',:class => 'btn btn-default'
        .form-group
          %span#search_error_message{:style => "color: #d9534f; margin-left: 5px;"}
      / Search form - end
    / /.nav-collapse
  - else
    / Setup pages - display the current step
    - if @current_step && @current_step > 0
      %span.navbar-brand= t('setup.step_html', current_step: @current_step)
  / /.container
/ Modal popup that appears with OpenStreetMap address suggestions
#basicModal.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "basicModal", :role => "dialog", :tabindex => "-1"}
  .modal-dialog
    .modal-content
      .modal-header
        %button.close{"data-dismiss" => "modal", :type => "button"} Ã—
        %h4#my_location_title.modal-title
      #modal-body-id.modal-body
      .modal-footer
        %button.btn.btn-default{"data-dismiss" => "modal", :type => "button"}= t('home.cancel')
